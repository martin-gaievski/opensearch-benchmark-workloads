{
  "name": "semantic-search",
  "description": "Indexes the corpus and then runs neural clause queries with Semantic search.",
  "default": false,
  "schedule": [
    {{ benchmark.collect(parts="../../common_operations/delete_index.json") }},
    {
      "operation": "delete-ingest-pipeline"
    },
    {
      "operation": "delete-ml-model-sentence-transformer"
    },
    {
      "operation": "put-cluster-settings"
    },
    {
      "operation": "register-ml-model-sentence-transformer"
    },
    {
      "operation": "deploy-ml-model"
    },
    {
      "operation": "create-text-embedding-processor-ingest-pipeline"
    },
    {{ benchmark.collect(parts="common/create_index_ingest_document_and_match_all_search.json") }},
    {
      "operation": "semantic-search",
      "warmup-iterations": {{warmup_iterations | default(100) | tojson}},
      "iterations": {{iterations | default(100) | tojson }},
      "target-throughput": {{ target_throughput | default(10) | tojson}},
      "clients": {{ search_clients | default(1)}}
    }
  ]
}
